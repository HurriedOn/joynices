!function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){function i(){h.aspect=window.innerWidth/window.innerHeight,h.updateProjectionMatrix(),f.setSize(window.innerWidth,window.innerHeight)}function n(e){var t=new THREE.Texture(u),r=new THREE.MeshBasicMaterial({map:t,overdraw:.5}),i=new Image;return i.onload=function(){t.image=this,t.needsUpdate=!0},i.src=e,r}function o(e){e.preventDefault(),m=!0,onPointerDownPointerX=e.clientX,onPointerDownPointerY=e.clientY,onPointerDownLon=v,onPointerDownLat=x}function a(e){!0===m&&(v=.1*(onPointerDownPointerX-e.clientX)+onPointerDownLon,x=.1*(e.clientY-onPointerDownPointerY)+onPointerDownLat)}function s(e){m=!1}function l(e){1==e.touches.length&&(e.preventDefault(),onPointerDownPointerX=e.touches[0].pageX,onPointerDownPointerY=e.touches[0].pageY,onPointerDownLon=v,onPointerDownLat=x)}function c(e){1==e.touches.length&&(e.preventDefault(),v=.1*(onPointerDownPointerX-e.touches[0].pageX)+onPointerDownLon,x=.1*(e.touches[0].pageY-onPointerDownPointerY)+onPointerDownLat)}function p(){requestAnimationFrame(p),d()}function d(){!1===m&&(v+=.08),x=Math.max(-85,Math.min(85,x)),y=THREE.Math.degToRad(90-x),g=THREE.Math.degToRad(v),R.x=500*Math.sin(y)*Math.cos(g),R.y=500*Math.cos(y),R.z=500*Math.sin(y)*Math.sin(g),h.position.copy(R).negate(),h.lookAt(R),f.render(E,h)}r(2),r(3),$(document).ready(function(){$(document).scroll(function(){$(document).scrollTop()>$(".navbar").height()?$(".localnav-wrappe").addClass("fiex-localnav"):$(".localnav-wrappe").removeClass("fiex-localnav")})});var h,E,f,u,m=!1,v=90,x=0,y=0,g=0,R=new THREE.Vector3;!function(){var e,t;e=document.getElementById("goggles"),h=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,1,1100),E=new THREE.Scene,(u=document.createElement("canvas")).width=128,u.height=128;var r=u.getContext("2d");r.fillStyle="rgb( 200, 200, 200 )",r.fillRect(0,0,u.width,u.height);var p=[n("../assets/img/right.jpg"),n("../assets/img/left.jpg"),n("../assets/img/up.jpg"),n("../assets/img/down.jpg"),n("../assets/img/front.jpg"),n("../assets/img/back.jpg")];(t=new THREE.Mesh(new THREE.BoxGeometry(300,300,300,7,7,7),p)).scale.x=-1,E.add(t);for(var d=0,m=t.geometry.vertices.length;d<m;d++){var v=t.geometry.vertices[d];v.normalize(),v.multiplyScalar(550)}(f=new THREE.CanvasRenderer).setPixelRatio(window.devicePixelRatio);var x=e.clientHeight,y=e.clientWidth;f.setSize(y,x),e.appendChild(f.domElement),e.addEventListener("mousedown",o,!1),e.addEventListener("mousemove",a,!1),e.addEventListener("mouseup",s,!1),e.addEventListener("touchstart",l,!1),e.addEventListener("touchmove",c,!1),window.addEventListener("resize",i,!1)}(),p()},function(e,t,r){THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){function e(r){if(!1!==r.visible){if(r instanceof THREE.Light)P.lights.push(r);else if(r instanceof THREE.Mesh||r instanceof THREE.Line||r instanceof THREE.Points){if(!1===r.material.visible)return;if(!0===r.frustumCulled&&!1===F.intersectsObject(r))return;t(r)}else if(r instanceof THREE.Sprite){if(!1===r.material.visible)return;if(!0===r.frustumCulled&&!1===F.intersectsSprite(r))return;t(r)}for(var i=r.children,n=0,o=i.length;n<o;n++)e(i[n])}}function t(e){(p=i()).id=e.id,p.object=e,j.setFromMatrixPosition(e.matrixWorld),j.applyMatrix4(k),p.z=j.z,p.renderOrder=e.renderOrder,P.objects.push(p)}function r(e,t,r){var i=1/e.w;e.z*=i,e.z>=-1&&e.z<=1&&((x=s()).id=t.id,x.x=e.x*i,x.y=e.y*i,x.z=e.z,x.renderOrder=t.renderOrder,x.object=t,x.rotation=t.rotation,x.scale.x=t.scale.x*Math.abs(x.x-(e.x+r.projectionMatrix.elements[0])/(e.w+r.projectionMatrix.elements[12])),x.scale.y=t.scale.y*Math.abs(x.y-(e.y+r.projectionMatrix.elements[5])/(e.w+r.projectionMatrix.elements[13])),x.material=t.material,P.elements.push(x))}function i(){if(d===w){var e=new THREE.RenderableObject;return R.push(e),w++,d++,e}return R[d++]}function n(){if(E===S){var e=new THREE.RenderableVertex;return T.push(e),S++,E++,e}return T[E++]}function o(){if(u===M){var e=new THREE.RenderableFace;return H.push(e),M++,u++,e}return H[u++]}function a(){if(v===b){var e=new THREE.RenderableLine;return C.push(e),b++,v++,e}return C[v++]}function s(){if(y===L){var e=new THREE.RenderableSprite;return z.push(e),L++,y++,e}return z[y++]}function l(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function c(e,t){var r=0,i=1,n=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return n>=0&&o>=0&&a>=0&&s>=0||!(n<0&&o<0||a<0&&s<0)&&(n<0?r=Math.max(r,n/(n-o)):o<0&&(i=Math.min(i,n/(n-o))),a<0?r=Math.max(r,a/(a-s)):s<0&&(i=Math.min(i,a/(a-s))),!(i<r||(e.lerp(t,r),t.lerp(e,1-i),0)))}var p,d,h,E,f,u,m,v,x,y,g,R=[],w=0,T=[],S=0,H=[],M=0,C=[],b=0,z=[],L=0,P={objects:[],lights:[],elements:[]},j=new THREE.Vector3,V=new THREE.Vector4,B=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),O=new THREE.Box3,D=new Array(3),W=new THREE.Matrix4,k=new THREE.Matrix4,N=new THREE.Matrix4,A=new THREE.Matrix3,F=new THREE.Frustum,G=new THREE.Vector4,I=new THREE.Vector4;this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var U=new function(){function e(e){var t=e.position,r=e.positionWorld,i=e.positionScreen;r.copy(t).applyMatrix4(g),i.copy(r).applyMatrix4(k);var n=1/i.w;i.x*=n,i.y*=n,i.z*=n,e.visible=i.x>=-1&&i.x<=1&&i.y>=-1&&i.y<=1&&i.z>=-1&&i.z<=1}function t(e,t,r){return!0===e.visible||!0===t.visible||!0===r.visible||(D[0]=e.positionScreen,D[1]=t.positionScreen,D[2]=r.positionScreen,B.intersectsBox(O.setFromPoints(D)))}function r(e,t,r){return(r.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(r.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}var i=[],s=[],l=[],p=null,d=null,E=new THREE.Matrix3;return{setObject:function(e){d=(p=e).material,E.getNormalMatrix(p.matrixWorld),i.length=0,s.length=0,l.length=0},projectVertex:e,checkTriangleVisibility:t,checkBackfaceCulling:r,pushVertex:function(t,r,i){(h=n()).position.set(t,r,i),e(h)},pushNormal:function(e,t,r){i.push(e,t,r)},pushColor:function(e,t,r){s.push(e,t,r)},pushUv:function(e,t){l.push(e,t)},pushLine:function(e,t){var r=T[e],i=T[t];r.positionScreen.copy(r.position).applyMatrix4(N),i.positionScreen.copy(i.position).applyMatrix4(N),!0===c(r.positionScreen,i.positionScreen)&&(r.positionScreen.multiplyScalar(1/r.positionScreen.w),i.positionScreen.multiplyScalar(1/i.positionScreen.w),(m=a()).id=p.id,m.v1.copy(r),m.v2.copy(i),m.z=Math.max(r.positionScreen.z,i.positionScreen.z),m.renderOrder=p.renderOrder,m.material=p.material,p.material.vertexColors===THREE.VertexColors&&(m.vertexColors[0].fromArray(s,3*e),m.vertexColors[1].fromArray(s,3*t)),P.elements.push(m))},pushTriangle:function(e,n,a){var s=T[e],c=T[n],h=T[a];if(!1!==t(s,c,h)&&(d.side===THREE.DoubleSide||!0===r(s,c,h))){(f=o()).id=p.id,f.v1.copy(s),f.v2.copy(c),f.v3.copy(h),f.z=(s.positionScreen.z+c.positionScreen.z+h.positionScreen.z)/3,f.renderOrder=p.renderOrder,f.normalModel.fromArray(i,3*e),f.normalModel.applyMatrix3(E).normalize();for(var u=0;u<3;u++){var m=f.vertexNormalsModel[u];m.fromArray(i,3*arguments[u]),m.applyMatrix3(E).normalize(),f.uvs[u].fromArray(l,2*arguments[u])}f.vertexNormalsLength=3,f.material=p.material,P.elements.push(f)}}}};this.projectScene=function(t,i,s,p){u=0,v=0,y=0,P.elements.length=0,!0===t.autoUpdate&&t.updateMatrixWorld(),null===i.parent&&i.updateMatrixWorld(),W.copy(i.matrixWorldInverse),k.multiplyMatrices(i.projectionMatrix,W),F.setFromMatrix(k),d=0,P.objects.length=0,P.lights.length=0,e(t),!0===s&&P.objects.sort(l);for(var h=P.objects,x=0,R=h.length;x<R;x++){var w=h[x].object,S=w.geometry;if(U.setObject(w),g=w.matrixWorld,E=0,w instanceof THREE.Mesh){if(S instanceof THREE.BufferGeometry){var H=S.attributes,M=S.groups;if(void 0===H.position)continue;for(var C=0,b=(Re=H.position.array).length;C<b;C+=3)U.pushVertex(Re[C],Re[C+1],Re[C+2]);if(void 0!==H.normal)for(var z=H.normal.array,C=0,b=z.length;C<b;C+=3)U.pushNormal(z[C],z[C+1],z[C+2]);if(void 0!==H.uv)for(var L=H.uv.array,C=0,b=L.length;C<b;C+=2)U.pushUv(L[C],L[C+1]);if(null!==S.index){var B=S.index.array;if(M.length>0)for(var O=0;O<M.length;O++)for(var D=M[O],C=D.start,b=D.start+D.count;C<b;C+=3)U.pushTriangle(B[C],B[C+1],B[C+2]);else for(var C=0,b=B.length;C<b;C+=3)U.pushTriangle(B[C],B[C+1],B[C+2])}else for(var C=0,b=Re.length/3;C<b;C+=3)U.pushTriangle(C,C+1,C+2)}else if(S instanceof THREE.Geometry){var X=S.vertices,Y=S.faces,$=S.faceVertexUvs[0];A.getNormalMatrix(g);for(var q=w.material,J=Array.isArray(q),K=0,Q=X.length;K<Q;K++){if(ge=X[K],j.copy(ge),!0===q.morphTargets)for(var Z=S.morphTargets,_=w.morphTargetInfluences,ee=0,te=Z.length;ee<te;ee++){var re=_[ee];if(0!==re){var ie=Z[ee].vertices[K];j.x+=(ie.x-ge.x)*re,j.y+=(ie.y-ge.y)*re,j.z+=(ie.z-ge.z)*re}}U.pushVertex(j.x,j.y,j.z)}for(var ne=0,oe=Y.length;ne<oe;ne++){var ae=Y[ne];if(void 0!==(q=!0===J?w.material[ae.materialIndex]:w.material)){var se=q.side,le=T[ae.a],ce=T[ae.b],pe=T[ae.c];if(!1!==U.checkTriangleVisibility(le,ce,pe)){var de=U.checkBackfaceCulling(le,ce,pe);if(se!==THREE.DoubleSide){if(se===THREE.FrontSide&&!1===de)continue;if(se===THREE.BackSide&&!0===de)continue}(f=o()).id=w.id,f.v1.copy(le),f.v2.copy(ce),f.v3.copy(pe),f.normalModel.copy(ae.normal),!1!==de||se!==THREE.BackSide&&se!==THREE.DoubleSide||f.normalModel.negate(),f.normalModel.applyMatrix3(A).normalize();for(var he=ae.vertexNormals,Ee=0,fe=Math.min(he.length,3);Ee<fe;Ee++){var ue=f.vertexNormalsModel[Ee];ue.copy(he[Ee]),!1!==de||se!==THREE.BackSide&&se!==THREE.DoubleSide||ue.negate(),ue.applyMatrix3(A).normalize()}f.vertexNormalsLength=he.length;var me=$[ne];if(void 0!==me)for(var ve=0;ve<3;ve++)f.uvs[ve].copy(me[ve]);f.color=ae.color,f.material=q,f.z=(le.positionScreen.z+ce.positionScreen.z+pe.positionScreen.z)/3,f.renderOrder=w.renderOrder,P.elements.push(f)}}}}}else if(w instanceof THREE.Line){if(N.multiplyMatrices(k,g),S instanceof THREE.BufferGeometry){if(void 0!==(H=S.attributes).position){for(var C=0,b=(Re=H.position.array).length;C<b;C+=3)U.pushVertex(Re[C],Re[C+1],Re[C+2]);if(void 0!==H.color)for(var xe=H.color.array,C=0,b=xe.length;C<b;C+=3)U.pushColor(xe[C],xe[C+1],xe[C+2]);if(null!==S.index)for(var C=0,b=(B=S.index.array).length;C<b;C+=2)U.pushLine(B[C],B[C+1]);else for(var ye=w instanceof THREE.LineSegments?2:1,C=0,b=Re.length/3-1;C<b;C+=ye)U.pushLine(C,C+1)}}else if(S instanceof THREE.Geometry){if(0===(X=w.geometry.vertices).length)continue;(le=n()).positionScreen.copy(X[0]).applyMatrix4(N);for(var ye=w instanceof THREE.LineSegments?2:1,K=1,Q=X.length;K<Q;K++)(le=n()).positionScreen.copy(X[K]).applyMatrix4(N),(K+1)%ye>0||(ce=T[E-2],G.copy(le.positionScreen),I.copy(ce.positionScreen),!0===c(G,I)&&(G.multiplyScalar(1/G.w),I.multiplyScalar(1/I.w),(m=a()).id=w.id,m.v1.positionScreen.copy(G),m.v2.positionScreen.copy(I),m.z=Math.max(G.z,I.z),m.renderOrder=w.renderOrder,m.material=w.material,w.material.vertexColors===THREE.VertexColors&&(m.vertexColors[0].copy(w.geometry.colors[K]),m.vertexColors[1].copy(w.geometry.colors[K-1])),P.elements.push(m)))}}else if(w instanceof THREE.Points){if(N.multiplyMatrices(k,g),S instanceof THREE.Geometry)for(var K=0,Q=(X=w.geometry.vertices).length;K<Q;K++){var ge=X[K];V.set(ge.x,ge.y,ge.z,1),V.applyMatrix4(N),r(V,w,i)}else if(S instanceof THREE.BufferGeometry&&void 0!==(H=S.attributes).position)for(var Re=H.position.array,C=0,b=Re.length;C<b;C+=3)V.set(Re[C],Re[C+1],Re[C+2],1),V.applyMatrix4(N),r(V,w,i)}else w instanceof THREE.Sprite&&(V.set(g.elements[12],g.elements[13],g.elements[14],1),V.applyMatrix4(k),r(V,w,i))}return!0===p&&P.elements.sort(l),P}}},function(e,t,r){THREE.SpriteCanvasMaterial=function(e){THREE.Material.call(this),this.type="SpriteCanvasMaterial",this.color=new THREE.Color(16777215),this.program=function(){},this.setValues(e)},THREE.SpriteCanvasMaterial.prototype=Object.create(THREE.Material.prototype),THREE.SpriteCanvasMaterial.prototype.constructor=THREE.SpriteCanvasMaterial,THREE.SpriteCanvasMaterial.prototype.isSpriteCanvasMaterial=!0,THREE.SpriteCanvasMaterial.prototype.clone=function(){var e=new THREE.SpriteCanvasMaterial;return e.copy(this),e.color.copy(this.color),e.program=this.program,e},THREE.CanvasRenderer=function(e){function t(){me.setRGB(0,0,0),ve.setRGB(0,0,0),xe.setRGB(0,0,0);for(var e=0,t=w.length;e<t;e++){var r=w[e],i=r.color;r.isAmbientLight?me.add(i):r.isDirectionalLight?ve.add(i):r.isPointLight&&xe.add(i)}}function r(e,t,r){for(var i=0,n=w.length;i<n;i++){var o=w[i];if(de.copy(o.color),o.isDirectionalLight){if(a=ye.setFromMatrixPosition(o.matrixWorld).normalize(),(s=t.dot(a))<=0)continue;s*=o.intensity,r.add(de.multiplyScalar(s))}else if(o.isPointLight){var a=ye.setFromMatrixPosition(o.matrixWorld),s=t.dot(ye.subVectors(a,e).normalize());if(s<=0)continue;if(0==(s*=0==o.distance?1:1-Math.min(e.distanceTo(a)/o.distance,1)))continue;s*=o.intensity,r.add(de.multiplyScalar(s))}}}function i(e,t,r){h(r.opacity),E(r.blending);var i=t.scale.x*U,n=t.scale.y*X,o=Math.sqrt(i*i+n*n);if(ue.min.set(e.x-o,e.y-o),ue.max.set(e.x+o,e.y+o),r.isSpriteMaterial){var a=r.map;if(null!==a){var s=he[a.id];if(void 0!==s&&s.version===a.version||(s=c(a),he[a.id]=s),void 0!==s.canvas){x(s.canvas);var l=a.image,p=l.width*a.offset.x,d=l.height*a.offset.y,f=l.width*a.repeat.x,u=l.height*a.repeat.y,m=i/f,y=n/u;Q.save(),Q.translate(e.x,e.y),0!==r.rotation&&Q.rotate(r.rotation),Q.translate(-i/2,-n/2),Q.scale(m,y),Q.translate(-p,-d),Q.fillRect(p,d,f,u),Q.restore()}}else x(r.color.getStyle()),Q.save(),Q.translate(e.x,e.y),0!==r.rotation&&Q.rotate(r.rotation),Q.scale(i,-n),Q.fillRect(-.5,-.5,1,1),Q.restore()}else r.isSpriteCanvasMaterial?(v(r.color.getStyle()),x(r.color.getStyle()),Q.save(),Q.translate(e.x,e.y),0!==r.rotation&&Q.rotate(r.rotation),Q.scale(i,n),r.program(Q),Q.restore()):r.isPointsMaterial&&(x(r.color.getStyle()),Q.save(),Q.translate(e.x,e.y),0!==r.rotation&&Q.rotate(r.rotation),Q.scale(i*r.size,-n*r.size),Q.fillRect(-.5,-.5,1,1),Q.restore())}function n(e,t,r,i){if(h(i.opacity),E(i.blending),Q.beginPath(),Q.moveTo(e.positionScreen.x,e.positionScreen.y),Q.lineTo(t.positionScreen.x,t.positionScreen.y),i.isLineBasicMaterial){if(f(i.linewidth),u(i.linecap),m(i.linejoin),i.vertexColors!==THREE.VertexColors)v(i.color.getStyle());else{var n=r.vertexColors[0].getStyle(),o=r.vertexColors[1].getStyle();if(n===o)v(n);else{try{var a=Q.createLinearGradient(e.positionScreen.x,e.positionScreen.y,t.positionScreen.x,t.positionScreen.y);a.addColorStop(0,n),a.addColorStop(1,o)}catch(e){a=n}v(a)}}i.isLineDashedMaterial&&y([i.dashSize,i.gapSize]),Q.stroke(),ue.expandByScalar(2*i.linewidth),i.isLineDashedMaterial&&y([])}}function o(e,t,i,n,o,c,d,f){N.info.render.vertices+=3,N.info.render.faces++,h(f.opacity),E(f.blending),M=e.positionScreen.x,C=e.positionScreen.y,b=t.positionScreen.x,z=t.positionScreen.y,L=i.positionScreen.x,P=i.positionScreen.y,a(M,C,b,z,L,P),(f.isMeshLambertMaterial||f.isMeshPhongMaterial||f.isMeshStandardMaterial)&&null===f.map?(ce.copy(f.color),pe.copy(f.emissive),f.vertexColors===THREE.FaceColors&&ce.multiply(d.color),le.copy(me),ge.copy(e.positionWorld).add(t.positionWorld).add(i.positionWorld).divideScalar(3),r(ge,d.normalModel,le),le.multiply(ce).add(pe),!0===f.wireframe?s(le,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(le)):f.isMeshBasicMaterial||f.isMeshLambertMaterial||f.isMeshPhongMaterial||f.isMeshStandardMaterial?null!==f.map?f.map.mapping===THREE.UVMapping&&(j=d.uvs,p(M,C,b,z,L,P,j[n].x,j[n].y,j[o].x,j[o].y,j[c].x,j[c].y,f.map)):null!==f.envMap?f.envMap.mapping===THREE.SphericalReflectionMapping&&(Re.copy(d.vertexNormalsModel[n]).applyMatrix3(we),V=.5*Re.x+.5,B=.5*Re.y+.5,Re.copy(d.vertexNormalsModel[o]).applyMatrix3(we),O=.5*Re.x+.5,D=.5*Re.y+.5,Re.copy(d.vertexNormalsModel[c]).applyMatrix3(we),W=.5*Re.x+.5,k=.5*Re.y+.5,p(M,C,b,z,L,P,V,B,O,D,W,k,f.envMap)):(le.copy(f.color),f.vertexColors===THREE.FaceColors&&le.multiply(d.color),!0===f.wireframe?s(le,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(le)):f.isMeshNormalMaterial?(Re.copy(d.normalModel).applyMatrix3(we),le.setRGB(Re.x,Re.y,Re.z).multiplyScalar(.5).addScalar(.5),!0===f.wireframe?s(le,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(le)):(le.setRGB(1,1,1),!0===f.wireframe?s(le,f.wireframeLinewidth,f.wireframeLinecap,f.wireframeLinejoin):l(le))}function a(e,t,r,i,n,o){Q.beginPath(),Q.moveTo(e,t),Q.lineTo(r,i),Q.lineTo(n,o),Q.closePath()}function s(e,t,r,i){f(t),u(r),m(i),v(e.getStyle()),Q.stroke(),ue.expandByScalar(2*t)}function l(e){x(e.getStyle()),Q.fill()}function c(e){if(0===e.version||e instanceof THREE.CompressedTexture||e instanceof THREE.DataTexture)return{canvas:void 0,version:e.version};var t=e.image;if(!1===t.complete)return{canvas:void 0,version:0};var r=e.wrapS===THREE.RepeatWrapping||e.wrapS===THREE.MirroredRepeatWrapping,i=e.wrapT===THREE.RepeatWrapping||e.wrapT===THREE.MirroredRepeatWrapping,n=e.wrapS===THREE.MirroredRepeatWrapping,o=e.wrapT===THREE.MirroredRepeatWrapping,a=document.createElement("canvas");a.width=t.width*(n?2:1),a.height=t.height*(o?2:1);var s=a.getContext("2d");s.setTransform(1,0,0,-1,0,t.height),s.drawImage(t,0,0),!0===n&&(s.setTransform(-1,0,0,-1,t.width,t.height),s.drawImage(t,-t.width,0)),!0===o&&(s.setTransform(1,0,0,1,0,0),s.drawImage(t,0,t.height)),!0===n&&!0===o&&(s.setTransform(-1,0,0,1,t.width,0),s.drawImage(t,-t.width,t.height));var l="no-repeat";!0===r&&!0===i?l="repeat":!0===r?l="repeat-x":!0===i&&(l="repeat-y");var c=Q.createPattern(a,l);return e.onUpdate&&e.onUpdate(e),{canvas:c,version:e.version}}function p(e,t,r,i,n,o,a,s,l,p,d,h,E){var f=he[E.id];if(void 0!==f&&f.version===E.version||(f=c(E),he[E.id]=f),void 0===f.canvas)return x("rgba( 0, 0, 0, 1)"),void Q.fill();x(f.canvas);var u,m,v,y,g,R,w,T,S=E.offset.x/E.repeat.x,H=E.offset.y/E.repeat.y,M=E.image.width*E.repeat.x,C=E.image.height*E.repeat.y;l=(l+S)*M,p=(p+H)*C,d=(d+S)*M,h=(h+H)*C,r-=e,i-=t,n-=e,o-=t,0!=(w=(l-=a=(a+S)*M)*(h-=s=(s+H)*C)-(d-=a)*(p-=s))&&(g=e-(u=(h*r-p*n)*(T=1/w))*a-(v=(l*n-d*r)*T)*s,R=t-(m=(h*i-p*o)*T)*a-(y=(l*o-d*i)*T)*s,Q.save(),Q.transform(u,m,v,y,g,R),Q.fill(),Q.restore())}function d(e,t,r){var i,n=t.x-e.x,o=t.y-e.y,a=n*n+o*o;0!==a&&(n*=i=r/Math.sqrt(a),o*=i,t.x+=n,t.y+=o,e.x-=n,e.y-=o)}function h(e){ee!==e&&(Q.globalAlpha=e,ee=e)}function E(e){te!==e&&(e===THREE.NormalBlending?Q.globalCompositeOperation="source-over":e===THREE.AdditiveBlending?Q.globalCompositeOperation="lighter":e===THREE.SubtractiveBlending?Q.globalCompositeOperation="darker":e===THREE.MultiplyBlending&&(Q.globalCompositeOperation="multiply"),te=e)}function f(e){ne!==e&&(Q.lineWidth=e,ne=e)}function u(e){oe!==e&&(Q.lineCap=e,oe=e)}function m(e){ae!==e&&(Q.lineJoin=e,ae=e)}function v(e){re!==e&&(Q.strokeStyle=e,re=e)}function x(e){ie!==e&&(Q.fillStyle=e,ie=e)}function y(e){se.length!==e.length&&(Q.setLineDash(e),se=e)}console.log("THREE.CanvasRenderer",THREE.REVISION),e=e||{};var g,R,w,T,S,H,M,C,b,z,L,P,j,V,B,O,D,W,k,N=this,A=new THREE.Projector,F=void 0!==e.canvas?e.canvas:document.createElement("canvas"),G=F.width,I=F.height,U=Math.floor(G/2),X=Math.floor(I/2),Y=0,$=0,q=G,J=I,K=1,Q=F.getContext("2d",{alpha:!0===e.alpha}),Z=new THREE.Color(0),_=!0===e.alpha?0:1,ee=1,te=0,re=null,ie=null,ne=null,oe=null,ae=null,se=[],le=new THREE.Color,ce=new THREE.Color,pe=new THREE.Color,de=new THREE.Color,he={},Ee=new THREE.Box2,fe=new THREE.Box2,ue=new THREE.Box2,me=new THREE.Color,ve=new THREE.Color,xe=new THREE.Color,ye=new THREE.Vector3,ge=new THREE.Vector3,Re=new THREE.Vector3,we=new THREE.Matrix3;void 0===Q.setLineDash&&(Q.setLineDash=function(){}),this.domElement=F,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.info={render:{vertices:0,faces:0}},this.supportsVertexTextures=function(){},this.setFaceCulling=function(){},this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(e){void 0!==e&&(K=e)},this.setSize=function(e,t,r){G=e*K,I=t*K,F.width=G,F.height=I,U=Math.floor(G/2),X=Math.floor(I/2),!1!==r&&(F.style.width=e+"px",F.style.height=t+"px"),Ee.min.set(-U,-X),Ee.max.set(U,X),fe.min.set(-U,-X),fe.max.set(U,X),ee=1,te=0,re=null,ie=null,ne=null,oe=null,ae=null,this.setViewport(0,0,e,t)},this.setViewport=function(e,t,r,i){Y=e*K,$=t*K,q=r*K,J=i*K},this.setScissor=function(){},this.setScissorTest=function(){},this.setClearColor=function(e,t){Z.set(e),_=void 0!==t?t:1,fe.min.set(-U,-X),fe.max.set(U,X)},this.setClearColorHex=function(e,t){console.warn("THREE.CanvasRenderer: .setClearColorHex() is being removed. Use .setClearColor() instead."),this.setClearColor(e,t)},this.getClearColor=function(){return Z},this.getClearAlpha=function(){return _},this.getMaxAnisotropy=function(){return 0},this.clear=function(){!1===fe.isEmpty()&&(fe.intersect(Ee),fe.expandByScalar(2),fe.min.x=fe.min.x+U,fe.min.y=-fe.min.y+X,fe.max.x=fe.max.x+U,fe.max.y=-fe.max.y+X,_<1&&Q.clearRect(0|fe.min.x,0|fe.max.y,fe.max.x-fe.min.x|0,fe.min.y-fe.max.y|0),_>0&&(h(1),E(THREE.NormalBlending),x("rgba("+Math.floor(255*Z.r)+","+Math.floor(255*Z.g)+","+Math.floor(255*Z.b)+","+_+")"),Q.fillRect(0|fe.min.x,0|fe.max.y,fe.max.x-fe.min.x|0,fe.min.y-fe.max.y|0)),fe.makeEmpty())},this.clearColor=function(){},this.clearDepth=function(){},this.clearStencil=function(){},this.render=function(e,r){if(void 0!==r.isCamera){var a=e.background;a&&a.isColor?(h(1),E(THREE.NormalBlending),x(a.getStyle()),Q.fillRect(0,0,G,I)):!0===this.autoClear&&this.clear(),N.info.render.vertices=0,N.info.render.faces=0,Q.setTransform(q/G,0,0,-J/I,Y,I-$),Q.translate(U,X),g=A.projectScene(e,r,this.sortObjects,this.sortElements),R=g.elements,w=g.lights,we.getNormalMatrix(r.matrixWorldInverse),t();for(var s=0,l=R.length;s<l;s++){var c=R[s],p=c.material;if(void 0!==p&&0!==p.opacity){if(ue.makeEmpty(),c instanceof THREE.RenderableSprite)(T=c).x*=U,T.y*=X,i(T,c,p);else if(c instanceof THREE.RenderableLine)T=c.v1,S=c.v2,T.positionScreen.x*=U,T.positionScreen.y*=X,S.positionScreen.x*=U,S.positionScreen.y*=X,ue.setFromPoints([T.positionScreen,S.positionScreen]),!0===Ee.intersectsBox(ue)&&n(T,S,c,p);else if(c instanceof THREE.RenderableFace){if(T=c.v1,S=c.v2,H=c.v3,T.positionScreen.z<-1||T.positionScreen.z>1)continue;if(S.positionScreen.z<-1||S.positionScreen.z>1)continue;if(H.positionScreen.z<-1||H.positionScreen.z>1)continue;T.positionScreen.x*=U,T.positionScreen.y*=X,S.positionScreen.x*=U,S.positionScreen.y*=X,H.positionScreen.x*=U,H.positionScreen.y*=X,p.overdraw>0&&(d(T.positionScreen,S.positionScreen,p.overdraw),d(S.positionScreen,H.positionScreen,p.overdraw),d(H.positionScreen,T.positionScreen,p.overdraw)),ue.setFromPoints([T.positionScreen,S.positionScreen,H.positionScreen]),!0===Ee.intersectsBox(ue)&&o(T,S,H,0,1,2,c,p)}fe.union(ue)}}Q.setTransform(1,0,0,1,0,0)}else console.error("THREE.CanvasRenderer.render: camera is not an instance of THREE.Camera.")}}}]);